<!DOCTYPE html>
<html lang="en">
<head>

    <link rel="stylesheet" type="text/css" href="./css/materialize.css" media="screen,projection"/>

    <script src="./lib/touch-emulator.js"></script>
    <script src="./lib/matter.js"></script>
    <script src="./lib/d3.v4.js"></script>
    <script src="./lib/jquery-3.1.1.js"></script>
    <script src="./lib/hammer-2.0.8.js"></script>

    <script src="./js/SimplePromise.js"></script>
    <script src="./js/matterD3Renderer.js"></script>

    <script src="./js/boot.js"></script>
    <script src="./js/effects.js"></script>
    <script src="./js/body.js"></script>
    <script src="./js/nobody.js"></script>
    <script src="./js/events.js"></script>
    <script src="./js/init.js"></script>

    <meta charset="UTF-8">
    <title>Hacker Run</title>

    <style>
        text {
            font-size: small;
        }

        text.hit {
            font-size: 5em;
        }
    </style>

</head>
<body>

<svg id="field"></svg>

<script>
    WORLD.init();

    WORLD.onTouch(function(x, y) {
        if(y < 100) {
            WORLD.circleBody(x, y, 10, false, "blue");
        }
    });

    WORLD.onTouchMove(function(x, y) {
        if(y >= 100) {
            WORLD.rectangleBody(x, y, 5, 5, true);
        }
    });

    WORLD.rectangle(0, 0, WORLD.width, 100, "lightgrey");

    var rectid = WORLD.rectangleBody(WORLD.width / 2, WORLD.height-20, 30, 10, true, "green");
    WORLD.rectangleBody(WORLD.width/2, WORLD.height - 100, WORLD.width - 300, 5, true, "grey");

    WORLD.onCollisionStart(rectid, function(pair) {
        WORLD.backgroundColorFlash("red");
        WORLD.showSplash("YEEEEAAAAAA", "hit");
    });

    function moveToLeft() {
        WORLD.moveBody(rectid, 10, 0).then(moveToRight);
    }

    function moveToRight() {
        WORLD.moveBody(rectid, 10, WORLD.width).then(moveToLeft);
    }

    moveToLeft();

</script>

</body>
</html>