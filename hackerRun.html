<!DOCTYPE html>
<html lang="en">
<head>

    <link rel="stylesheet" type="text/css" href="./css/materialize.css" media="screen,projection"/>

    <script src="./lib/touch-emulator.js"></script>
    <script src="./lib/matter.js"></script>
    <script src="./lib/d3.v4.js"></script>
    <script src="./lib/jquery-3.1.1.js"></script>
    <script src="./lib/hammer-2.0.8.js"></script>

    <script src="./js/SimplePromise.js"></script>
    <script src="./js/matterD3Renderer.js"></script>

    <script src="./js/boot.js"></script>
    <script src="./js/effects.js"></script>
    <script src="./js/body.js"></script>
    <script src="./js/nobody.js"></script>
    <script src="./js/events.js"></script>
    <script src="./js/init.js"></script>

    <meta charset="UTF-8">
    <title>Hacker Run</title>

    <style>
        text {
            font-size: small;
        }

        text.hit {
            font-size: 5em;
        }
    </style>

</head>
<body>

<svg id="field"></svg>

<script>
    alert("Fange den roten Balken mit einer Kugel, die du erzeugst, indem du auf das graue Feld dr√ºckst. Mit deinen courser erzeugst du Schienen die dir helfen den Balken zu fangen. Achte darauf, dass dein Ball den grauen Balken nicht trifft.  ")
    WORLD.init();

    WORLD.onTouch(function(x, y) {
        if(y < 100) {
            WORLD.circleBody(x, y, 10, false, "pink");
        }
    });

    WORLD.onTouchMove(function(x, y) {
        if(y >= 100) {
            WORLD.rectangleBody(x, y, 5, 5, true);
        }
    });

    WORLD.rectangle(0, 0, WORLD.width, 100, "lightgrey");


    var rectid2 = WORLD.rectangleBody(WORLD.width/2, WORLD.height - 100, WORLD.width - 300, 5, true, "grey");
    var rectid3 = WORLD.rectangleBody(WORLD.width / 2, WORLD.height-20, 30, 10, true, "red");
    var gewinn = 0;
    var verloren = 0;

    WORLD.onCollisionStart(rectid3, function() {
        WORLD.backgroundColorFlash("yellow");
        WORLD.showSplash("+1", "hit");
        gewinn = gewinn + 1
    });

    WORLD.onCollisionStart(rectid2, function() {
        WORLD.backgroundColorFlash("blue");
        WORLD.showSplash("LOSER", "hit");
        verloren = verloren + 1;
    });



    function moveToLeft() {
        WORLD.moveBody(rectid3, 5, 10, 20).then(moveToRight);
    }

    function moveToRight() {
        WORLD.moveBody(rectid3, 5, 900, 600, WORLD.width).then(moveToLeft);
    }


    moveToLeft();


// Ich will das man nach 10 mal gewonnen hat aber das funtioniert irgendwie nicht und bei 2 mal grauer Balken dass
    // game over steht wieso funktioniert das nicht? :(
    if (gewinn = 10) {
        World.backroundColourFlash("yellow");
        World.showSplash("Gewonnen!!!");
    }

    if (verloren = 3) {
        WORLD.backgroundColorFlash("blue");
        WORLD.showSplash("GAME OVER", "hit");

    }

</script>

</body>
</html>