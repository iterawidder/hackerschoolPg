<!DOCTYPE html>
<html lang="en">

<head>

    <link rel="stylesheet" type="text/css" href="./css/materialize.css" media="screen,projection" />
    <link rel="stylesheet" type="text/css" href="./css/material-icons.css" />

    <script src="./lib/touch-emulator.js"></script>
    <script src="./lib/matter.js"></script>
    <script src="./lib/d3.v4.js"></script>
    <script src="./lib/jquery-3.1.1.js"></script>
    <script src="./lib/hammer-2.0.8.js"></script>
    <script src="./lib/lodash.js"></script>

    <script src="./js/private/SimplePromise.js"></script>
    <script src="./js/private/matterD3Renderer.js"></script>

    <script src="./js/world.js"></script>

    <meta charset="UTF-8">
    <title>Just a cool game</title>

    <style>
        text {
            font-size: 5em;
            color: black;
        }
    </style>

</head>

<body>

    <svg id="field"></svg>

    <script>
        /* global _ */
        /* global World */

        var world = new World();

        var Ziel = world.rectangleBody(world.getWidth() / 6, world.getHeight() / 1, 100, 30, true)


        var Balken = world.rectangleBody(world.getWidth() / 2, world.getHeight() * 3 / 4, world.getWidth() / 2, 30, true, "red");
        world.rotateBodyByDegree(Balken, 90);

        world.onTouch(function(x, y) {
            var fertig = false
            var Kugel = setInterval(function() {

                world.circleBody(x, y, 10, false, "green");
                world.on2BodiesCollisionStart(Kugel, Balken, function() {
                    if (fertig == false) {
                        world.showSplash("RIP");
                        world.speek("Ja RIP!", 1);
                        fertig = true
                    }
                }, 1)

            })

        })


        setInterval(function() {
            world.rotateBodyByDegree(Balken, 3)


        });

        function nachlinks() {
            world.moveBody(Ziel, 10, 0, world.getHeight()).then(nachrechts())
        }

        function nachrechts() {
            world.moveBody(Ziel, 10, world.getWidth(), world.getHeight()).then(nachlinks())
        }
    </script>

</body>

</html>
